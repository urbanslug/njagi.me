<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
              rel="stylesheet"
              integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
              crossorigin="anonymous"
        >

        

        <link rel="stylesheet" href="https://njagi.me/style.css">

        <title>Mostly Programming</title>
    </head>

    <body>

        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="/">Home</a>

                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="/posts/">Posts</a></li>
                    <li class="nav-item"><a class="nav-link" href="/notes/">Notes</a></li>
                    <li class="nav-item"><a class="nav-link" href="/wiki/">Wiki</a></li>
                    <li class="nav-item"><a class="nav-link" href="/tags/">Tags</a></li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li class="nav-item"><a class="nav-link" href="/about/">About</a></li>
                </ul>

            </div> <!-- container fluid -->
        </nav>

        <div class="container">
            <div class="margin-vertical-20">
                

<div class="row">
    <div class="row justify-content-end"> <!-- start post heading -->
        <div class="col-md-10">

            <h1 id="post-title">Pass for iOS</h1>

            <div id="post-metadata">
                January 07, 2019

                <p>
                    
                </p>

            </div> <!-- page metadata -->
        </div>
    </div> <!-- end post heading -->

    <div class="row justify-content-center">  <!-- start post content -->
        <div class="col-md-8">
            <p>If you have a GPG keypair, believe in using strong passwords and are paranoid (don't trust password management tools), then <a href="https://www.passwordstore.org/">pass</a> is the tool for you.
I've been using it for so long that I can't remember when I started using it and I have to say, I really like it.</p>
<p>Pass is a FOSS tool that lets you roll your own password management tool-chain and if that sounds hard, it's not.
It works by storing your password, security questions etc in version controlled plain text files and encrypting them using your keys.
You then clone your passwords repo and copy your GPG keys to the devices which you would like to access your passwords on.</p>
<blockquote>
<p>Pass is a FOSS that lets you roll your own password management tool-chain.</p>
</blockquote>
<p>A known downside of pass is that it <strong>leaks metadata</strong>.
The workaround to this is storing all your passwords in a single file.
Guys in the ##crypto on Freenode also recommend <a href="https://keepassxc.org/">keepassxc</a>.</p>
<p>A short overview of pass:</p>
<ol>
<li>Have a GPG keypair and (not required but a really good idea) a hosted version control system.</li>
<li>Set up pass so that it knows which keypair to use.</li>
<li>Create a git repo (password-store) which will hold your encrypted passwords.</li>
<li>Start generating and version controlling your passwords.</li>
</ol>
<p>However, this isn't a post about pass; it's about how to use pass on iOS and
there's a tool, <a href="https://github.com/mssun/passforios">pass for iOS</a>, that does that.
Assuming you're already a pass user the question is how
to get pass working on your iPad, iPhone or whatever.</p>
<h1 id="how-do-we-transfer-our-ssh-and-gpg-keys">How do we transfer our SSH and GPG keys?</h1>
<p>I think the easiest way would be via iTunes but that doesn't feel right at all.
Why would I trust a 3rd party server with my private key?</p>
<p>What I decided to go with is a tool, <a href="https://github.com/yishilin14/asc-key-to-qr-code-gif">asc-key-to-qr-code-gif</a>,
that converts converts ASCII (amored for GPG) keys to QR codes
and then I scan those QR codes on <a href="https://github.com/mssun/passforios">Pass for iOS</a>.
It's all open source tools and no 3rd party servers involved.
Tell me what you think about this &quot;convert your keys to QR code&quot;
business <a href="https://twitter.com/urbanslug">via a tweet</a>.</p>
<blockquote>
<p>Itâ€™s all open source tools and no 3rd party servers involved.</p>
</blockquote>
<h2 id="setup-and-installing-dependencies">Setup and installing dependencies</h2>
<p>First, I had to install some dependencies via homebrew. I felt it important to install zbar in case there were any errors during QR code generation.</p>
<pre data-lang="bash" style="background-color:#002b36;color:#839496;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#b58900;">brew</span><span> install libqrencode imagemagick zbar
</span></code></pre>
<p><br/>Clone the <a href="https://github.com/yishilin14/asc-key-to-qr-code-gif">asc-key-to-qr-code-gif</a> repo to get the QR code generation script, asc-to-gif.sh.</p>
<pre data-lang="bash" style="background-color:#002b36;color:#839496;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#b58900;">git</span><span> clone git@github.com:yishilin14/asc-key-to-qr-code-gif.git
</span></code></pre>
<h2 id="gpg">GPG</h2>
<h3 id="export-your-gpg-keys-into-ascii-armored-files">Export your GPG keys into ASCII armored files</h3>
<pre data-lang="bash" style="background-color:#002b36;color:#839496;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#b58900;">gpg</span><span style="color:#268bd2;"> --export --armor </span><span style="color:#657b83;">&lt;</span><span>key id</span><span style="color:#657b83;">&gt; &gt;</span><span> public.asc
</span><span style="color:#b58900;">gpg</span><span style="color:#268bd2;"> --export-secret-keys --armor </span><span style="color:#657b83;">&lt;</span><span>key id</span><span style="color:#657b83;">&gt; &gt;</span><span> private.asc
</span><span>
</span></code></pre>
<h3 id="generate-and-scan-the-gpg-gifs">Generate and scan the GPG gifs:</h3>
<pre data-lang="bash" style="background-color:#002b36;color:#839496;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#b58900;">asc-to-gif.sh</span><span> public.asc public.gif
</span><span style="color:#b58900;">asc-to-gif.sh</span><span> private.asc private.gif
</span></code></pre>
<h2 id="ssh">SSH</h2>
<p>I prefer to have different SSH keys for different devices
that way it's easy to revoke access for different devices.
Moreover, using ed25519 keys on phones often fails because of the versions of OpenSSH
they ship with so I just go with RSA which is the default anyway.
In this case it even had to be PEM due to the version of GitSSH on iOS.
Based on the <a href="https://github.com/mssun/passforios/wiki/Supported-Unsupported-Key-Algorithms">Supported Unsupported Key Algorithms wiki page</a> and <a href="https://github.com/mssun/passforios/issues/218">issue 218</a>,
generate device keys with:</p>
<pre data-lang="bash" style="background-color:#002b36;color:#839496;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#b58900;">ssh-keygen</span><span style="color:#268bd2;"> -t</span><span> rsa</span><span style="color:#268bd2;"> -b</span><span> 4096</span><span style="color:#268bd2;"> -m</span><span> PEM</span><span style="color:#268bd2;"> -f </span><span style="color:#d33682;">~</span><span>/.ssh/id_rsa_</span><span style="color:#657b83;">&lt;</span><span>device</span><span style="color:#657b83;">&gt; </span><span>-C &quot;</span><span style="color:#2aa198;">&lt;user&gt;@&lt;device&gt;</span><span>&quot;
</span></code></pre>
<p>Then copy the pubkey to the version control tool of your choice.</p>
<h3 id="generate-and-scan-the-ssh-gif">Generate and scan the SSH gif:</h3>
<p>Generate a GIF for it.</p>
<pre data-lang="bash" style="background-color:#002b36;color:#839496;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#b58900;">asc-to-gif.sh </span><span style="color:#d33682;">~</span><span>/.ssh/id_rsa_</span><span style="color:#657b83;">&lt;</span><span>device</span><span style="color:#657b83;">&gt;</span><span> ssh.gif
</span></code></pre>
<h4 id="cloning-your-password-store-repo-into-your-device">Cloning your password-store repo into your device</h4>
<p>Set the URL in this format:</p>
<pre data-lang="bash" style="background-color:#002b36;color:#839496;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#b58900;">ssh://git@gitlab.com/</span><span style="color:#657b83;">&lt;</span><span>gitlab username</span><span style="color:#657b83;">&gt;</span><span>/</span><span style="color:#657b83;">&lt;</span><span>password store repo</span><span style="color:#657b83;">&gt;</span><span>.git
</span></code></pre>
<p>and set your username to <code>git</code> according to <a href="https://github.com/mssun/passforios/issues/112#issuecomment-318342043">issue 112</a>.</p>
<p>I'll assume you can do the rest, like cloning the password store repository into your device and decrypting your password files, by yourself ;).</p>

        </div>
    </div>  <!-- end post content -->

</div> <!--  -->



            </div>
        </div>

    </body>

    <footer>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-6">
                    <p class="p-copyright">
                        All work is under the <a href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License, Version 1.3</a>.
                    </p>
                </div>
            </div>
        </div>
    </footer>

</html>
